@model AutoDealer.Web.Models.CarOwner

@*<div class="row">*@
    @*<div class="col-md-4">*@
        <form id="OwnerForm" asp-action="AddOwner" asp-controller="AddingCar" method="post" class="row mx-auto">
            <div class="col-6">
                <label asp-for="FirstName" class="control-label"></label>
                <input asp-for="FirstName" class="form-control" />
                <span asp-validation-for="FirstName" class="text-danger"/>
            </div>
            <div class="col-6">
                <label asp-for="LastName" class="control-label"></label>
                <input asp-for="LastName" class="form-control" />
                <span asp-validation-for="LastName" class="text-danger"/>
            </div>
            <div class="col-6">
                <label asp-for="BDay" class="control-label"></label>
                <input asp-for="BDay" type="date" class="form-control" />
                <span asp-validation-for="BDay" class="text-danger"/>
            </div>
            <div class="col-6">
                <label asp-for="PassportSeries" class="control-label"></label>
                <input asp-for="PassportSeries" class="form-control" />
                <span asp-validation-for="PassportSeries" class="text-danger"/>
            </div>
            <div class="col-6">
                <label asp-for="Phone" class="control-label"></label>
                <input asp-for="Phone" class="form-control" />
                <span asp-validation-for="Phone" class="text-danger"/>
            </div>
            <div class="col-6">
                <label asp-for="City" class="control-label"></label>
                <input asp-for="City" class="form-control" />
                <span asp-validation-for="City" class="text-danger"/>
            </div>
            <div class="col-6">
                <label asp-for="Street" class="control-label"></label>
                <input asp-for="Street" class="form-control" />
                <span asp-validation-for="Street" class="text-danger"/>
            </div>
            <div class="col-6">
                <label asp-for="House" class="control-label"></label>
                <input asp-for="House" class="form-control" />
                <span asp-validation-for="House" class="text-danger"/>
            </div>
            <div class="col-6">
                <label asp-for="Flat" class="control-label"></label>
                <input asp-for="Flat" class="form-control" />
                <span asp-validation-for="Flat" class="text-danger"/>
            </div>
            <div class="col-6 d-flex justify-content-between mx-auto text-center mw-70">
                <input type="submit" id="btnSubmit" value="Добавить" class="btn btn-primary"/>
                <a asp-action="Index" asp-controller="Car" class="btn btn-danger">Отмена</a>
            </div>
        </form>
    @*</div>*@
@*</div>*@
<div>
    <a asp-action="Index" asp-controller="Car">На главную</a>
</div>

@Html.Hidden("Owner", (object)ViewBag.OwnerSaved);

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}

<script>
    $(document).ready(function () {

        if($('#Owner').val() == "ok") {
            alert("We saved owner");
        }

        //$('#btnSubmit').click(function () {
  
        //    if ($("#OwnerForm").valid()) { //check if form is valid using model annotation
        //        $('#OwnerForm').submit(); 
        //    }
        //    else {
        //        return false;
        //    }
        //});
        //$("#OwnerForm").on("submit", function (event) {
        //    event.preventDefault();
            
        //    console.log("try to send")

        //    $('#btnSubmit').attr('disabled', 'disabled');
        //    var url = $(this).attr("action");
        //    var formData = $(this).serialize();

        //    console.log("url " + url)
        //    console.log("formData " + formData)

        //    $.ajax({
        //        url: url,
        //        type: "POST",
        //        data: formData,
        //        dataType: "json",
        //        success: function (response) {  
        //            alert('Success! ' + JSON.stringify(response));
        //        },
        //        error: function (response) {
        //            alert('Error!');
        //        },
        //        complete: function () {
        //            $('#btnSubmit').removeAttr('disabled');
        //        }
        //    })
        //});
    });
    function AddOwner(){
        console.log('Adding..owner');

    }
</script>